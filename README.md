# geister_server

Geister用のゲームサーバ(作りかけ)．

## 動作概要(仮)
- 二つのクライアントとWebSocketで通信し，Geisterを進行する
- ボードの管理，勝敗の管理をする

## 盤面(仮)
        0 1 2 3 4 5
      0   h g f e
      1   d c b a
      2
      3
      4   A B C D
      5   E F G H
- サーバ側では表示のy=0の側を先手番の陣，y=5の側を後手番の陣とする
- プレーヤーは自分が先手なのか後手なのかによらず，y=5の側が自陣であるとする
- コマの名前は，ゲーム開始から終了まで変わらない
- コマが赤/青はゲーム開始前に，それぞれのクライアントに設定してもる

## ゲームの進行概要(仮)
- 2つのプレーヤインスタンス(それぞれ8個のコマを持つ)を生成してクライアントからの通信を待つ
- クライアントに赤オバケを4つセットしてもらう．("ABCD"などのコマンドを送ってもらう)
- 先手にコマをうたせ，結果の盤面を両者に送信
 - 打ってもらう手は"AN"のようにコマ名と移動方向(東=W/西=E/南=S/北=N)
 - サーバから返される情報はコマの(x,y)と色(相手に非公開の赤=R/相手に非公開の青=B/赤=r/青=b/不明=u)を ABCDEFGHabcdefgh (ここで小文字は相手のコマ) 順に，並べたもの
  - たとえば初期状態は，14R24R34R44R15B25B35B45B41u31u21u11u40u30u20u10u
 - 相手のコマは小文字
 - 取られたコマの座標は(9,9)
  - コマを取ったり，取られたりするとコマの色が公開される．
   - たとえば，自分のAが相手にとられている，相手のhをとっている，という時点でサーバーから送られてくるデータは，99r24R34R44R15B25B35B45B41u31u21u11u40u30u20u99b
 - 脱出したコマの座標は(8,8)
 - 自分の手番によらず同じ方向(5の側が自陣，0の側が相手陣)
- 後手にコマをうたせ，結果の盤面を両者に送信，以下，勝敗がつくまで先手後手を繰り返す

## デバッグ
    %run geister_server
    b = Board()
    p0 = Player()
    p1 = Player()
    b.set_player(p0, 0)
    b.set_player(p0, 1)
    b.print_board()
